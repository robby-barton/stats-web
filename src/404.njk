---
layout: layouts/base.njk
title: 404
permalink: 404.html
---

<h1>Not Found</h1>
<p>The page you requested could not be found.</p>

<script type="application/json" id="available-rankings">{{ availableRankings | json | safe }}</script>
<script>
	(function () {
		const path = window.location.pathname.replace(/\/$/, '');
		const parts = path.split('/').filter(Boolean);
		if (parts.length < 1) return;

		if (parts[0] === 'team') {
			window.location.replace('/teams');
			return;
		}

		var knownSports = ['football', 'basketball'];
		var sport = '';
		var rankingParts = parts;

		if (knownSports.includes(parts[0])) {
			sport = parts[0];
			rankingParts = parts.slice(1);
		}

		if (rankingParts[0] !== 'ranking' || rankingParts.length < 4) {
			return;
		}

		var division = rankingParts[1] ? rankingParts[1].toLowerCase() : '';
		var year = rankingParts[2] || '';
		var week = rankingParts[3] || '';

		var dataEl = document.getElementById('available-rankings');
		if (!dataEl || !dataEl.textContent) return;
		var allAvail = JSON.parse(dataEl.textContent);

		var avail = sport ? allAvail[sport] : allAvail['football'];
		var prefix = sport || 'football';

		if (!avail || !(year in avail)) {
			window.location.replace('/');
			return;
		}

		var sportDivisions = {
			football: ['fbs', 'fcs'],
			basketball: ['d1'],
		};
		var validDivisions = sportDivisions[prefix] || ['fbs', 'fcs'];
		if (!validDivisions.includes(division)) {
			window.location.replace('/');
			return;
		}

		var yearInfo = avail[year];
		var weeks = Number(yearInfo.weeks);
		var postseason = Boolean(yearInfo.postseason);

		if (week.toLowerCase() === 'final' && !postseason) {
			window.location.replace('/' + prefix + '/ranking/' + division + '/' + year + '/' + weeks);
			return;
		}

		if (week.toLowerCase() !== 'final') {
			var weekNum = Number(week);
			if (!Number.isInteger(weekNum)) {
				window.location.replace('/' + prefix + '/ranking/' + division + '/' + year + '/' + (postseason ? 'final' : weeks));
				return;
			}
			if (weekNum > weeks) {
				window.location.replace('/' + prefix + '/ranking/' + division + '/' + year + '/' + (postseason ? 'final' : weeks));
				return;
			}
			if (weekNum < 1) {
				window.location.replace('/' + prefix + '/ranking/' + division + '/' + year + '/1');
				return;
			}
		}
	})();
</script>
